int func_0x803c340(int p1, int p2, int p3)
{
  /*sp = sp - 16;*/
  /*r6 = r1;*/
  /*r8 = r2;*/
  r7 = 0;
  *(p2 + 0) = 0;
  r5 = func_0x803c888(p1, p2, p3);
  if (r5 == 0) {
    return 11;
  }

  // TODO verify LSL here
  if ((*((0x20001e68 + r5) << 2)) == 0) {
    return 12;
  }

  *(p2 + 0) = *((0x20001e68 + r5) << 2);
  r6 = r2 & 254;
  r0 = *((*((0x20001e68 + r5) << 2)) + 0);
  cond0 = (*((*((0x20001e68 + r5) << 2)) + 0)) == 0;
  r0 = *((*((0x20001e68 + r5) << 2)) + 1);
  func_0x803ba7a();
  ;
  cond1 = (*((*((0x20001e68 + r0) << 2)) + 1)) & 1;
  if ((~cond0) && (~cond1))
  {
    if (((r2 & 254) == 0) || (~((*((*((0x20001e68 + r0) << 2)) + 1)) & 4)))
    {
      sp = sp + 16;
      r0 = 0;
      return 0;
    }
    else
    {
      sp = sp + 16;
      r0 = 10;
      return 10;
    }

  }

  *((*((0x20001e68 + r0) << 2)) + 0) = 0;
  r0 = (unsigned int) r0;
  *((*((0x20001e68 + r0) << 2)) + 1) = (unsigned int) r0;
  func_0x803ba5c();
  ;
  if (((unsigned int) r0) & 1)
  {
    sp = sp + 16;
    r0 = 3;
    return 3;
  }

  if (((r2 & 254) != 0) && (r0 & 4))
  {
    sp = sp + 16;
    r0 = 10;
    return 10;
  }

  r6 = 0;
  r1 = 0;
  r0 = *((0x20001e68 + r0) << 2);
  func_0x803afd0();
  ;
  if ((*((0x20001e68 + r0) << 2)) == 2)
  {
    r5 = 0;
    r8 = sp;
    while (r5 < 4)
    {
      r0 = r4 + (r5 << 4);
      r0 = (r4 + (r5 << 4)) + 502;
      r1 = *(((r4 + (r5 << 4)) + 502) + 4);
      if (var0 != 0)
      {
        var1 = ((r4 + (r5 << 4)) + 502) + 8;
        func_0x803cbba();
        ;
      }
      else
      {
        r0 = 0;
      }

      *((r8 + r5) << lsl) = r0;
      r5 = r5 + 1;
    }

  }

  r5 = 0;
  while (1)
  {
    r6 = *((r8 + r5) << 2);
    if ((*((r8 + r5) << 2)) != 0)
    {
      r1 = *((r8 + r5) << 2);
      r0 = r4;
      func_0x803afd0();
      ;
    }
    else
    {
      r0 = 3;
    }

    r5 = r5 + 1;
    if ((r0 < 2) && ((r5 + 1) >= 4))
    {
      break;
    }

  }

  if ((*((0x20001e68 + r0) << 2)) == 4)
  {
    sp = sp + 16;
    r0 = 1;
    return 1;
  }

  if (r0 >= 2)
  {
    sp = sp + 16;
    r0 = 13;
    return 13;
  }

  r0 = (*((0x20001e68 + r0) << 2)) + 67;
  func_0x803cbd0();
  ;
  if (((*((0x20001e68 + r0) << 2)) + 67) != 4096)
  {
    sp = sp + 16;
    r0 = 13;
    return 13;
  }

  r0 = (*((0x20001e68 + r0) << 2)) + 78;
  func_0x803cbd0();
  ;
  r1 = (*((0x20001e68 + r0) << 2)) + 78;
  if (((*((0x20001e68 + r0) << 2)) + 78) == 0)
  {
    r0 = (*((0x20001e68 + r0) << 2)) + 92;
    func_0x803cbba();
    ;
    r1 = (*((0x20001e68 + r0) << 2)) + 92;
  }

  *((*((0x20001e68 + r0) << 2)) + 32) = r1;
  r0 = *((*((0x20001e68 + r0) << 2)) + 72);
  *((*((0x20001e68 + r0) << 2)) + 2) = *((*((0x20001e68 + r0) << 2)) + 72);
  if (((*((*((0x20001e68 + r0) << 2)) + 72)) != 1) || ((*((*((0x20001e68 + r0) << 2)) + 72)) != 2))
  {
    sp = sp + 16;
    r0 = 13;
    return 13;
  }

  r8 = r0 * r1;
  r0 = *((*((0x20001e68 + r0) << 2)) + 69);
  *((*((0x20001e68 + r0) << 2)) + 10) = *((*((0x20001e68 + r0) << 2)) + 69);
  var2 = (*((*((0x20001e68 + r0) << 2)) + 69)) - 1;
  if (((*((*((0x20001e68 + r0) << 2)) + 69)) == 0) && ((*((*((0x20001e68 + r0) << 2)) + 69)) & var2))
  {
    sp = sp + 16;
    r0 = 13;
    return 13;
  }

  r0 = (*((0x20001e68 + r0) << 2)) + 73;
  func_0x803cbd0();
  ;
  *((*((0x20001e68 + r0) << 2)) + 8) = (*((0x20001e68 + r0) << 2)) + 73;
  if (((*((0x20001e68 + r0) << 2)) + 73) & 127)
  {
    sp = sp + 16;
    r0 = 13;
    return 13;
  }

  r0 = (*((0x20001e68 + r0) << 2)) + 75;
  func_0x803cbd0();
  ;
  r5 = (*((0x20001e68 + r0) << 2)) + 75;
  r0 = (*((0x20001e68 + r0) << 2)) + 75;
  if (((*((0x20001e68 + r0) << 2)) + 75) != 0)
  {
    r0 = (*((0x20001e68 + r0) << 2)) + 88;
    func_0x803cbba();
    ;
    r5 = (*((0x20001e68 + r0) << 2)) + 88;
  }

  r0 = (*((0x20001e68 + r0) << 2)) + 70;
  func_0x803cbd0();
  ;
  r2 = (*((0x20001e68 + r0) << 2)) + 70;
  if (((*((0x20001e68 + r0) << 2)) + 70) == 0)
  {
    sp = sp + 16;
    r0 = 13;
    return 13;
  }

  r3 = *((*((0x20001e68 + r0) << 2)) + 8);
  var3 = ((*((0x20001e68 + r0) << 2)) + 70) + (r0 * r1);
  var4 = var3 + ((*((*((0x20001e68 + r0) << 2)) + 8)) >> 7);
  if (r5 < var4)
  {
    sp = sp + 16;
    r0 = 13;
    return 13;
  }

  ip = *((*((0x20001e68 + r0) << 2)) + 10);
  r0 = r5 - var4;
  var5 = (r5 - var4) / (*((*((0x20001e68 + r0) << 2)) + 10));
  if (var5 == 0)
  {
    sp = sp + 16;
    r0 = 13;
    return 13;
  }

  r5 = 0;
  ip = 0xffffff5;
  if (r0 <= 0xffffff5)
  {
    r5 = 3;
  }

  ip = 65525;
  if (r0 <= 65525)
  {
    r5 = 2;
  }

  ip = 4085;
  if (r0 <= 4085)
  {
    r5 = 1;
  }

  if (r5 == 0)
  {
    sp = sp + 16;
    r0 = 13;
    return 13;
  }

  r0 = r0 + 2;
  *((*((0x20001e68 + r0) << 2)) + 28) = r0 + 2;
  *((*((0x20001e68 + r0) << 2)) + 36) = r6;
  var6 = ((*((0x20001e68 + r0) << 2)) + 70) + r6;
  *((*((0x20001e68 + r0) << 2)) + 40) = var6;
  r1 = var4 + r6;
  *((*((0x20001e68 + r0) << 2)) + 48) = var4 + r6;
  if (r5 == 3)
  {
    r0 = (*((0x20001e68 + r0) << 2)) + 98;
    func_0x803cbd0();
    ;
    if (((*((0x20001e68 + r0) << 2)) + 98) != 0)
    {
      sp = sp + 16;
      r0 = 13;
      return 13;
    }

    r0 = *((*((0x20001e68 + r0) << 2)) + 8);
    if ((*((*((0x20001e68 + r0) << 2)) + 8)) != 0)
    {
      sp = sp + 16;
      r0 = 13;
      return 13;
    }

    r0 = (*((0x20001e68 + r0) << 2)) + 100;
    func_0x803cbba();
    ;
    *((*((0x20001e68 + r0) << 2)) + 44) = (*((0x20001e68 + r0) << 2)) + 100;
    r0 = *((*((0x20001e68 + r0) << 2)) + 28);
    var7 = (*((*((0x20001e68 + r0) << 2)) + 28)) << 2;
  }
  else
  {
    if ((*((*((0x20001e68 + r0) << 2)) + 8)) == 0)
    {
      sp = sp + 16;
      r0 = 13;
      return 13;
    }

    r1 = var6 + (r0 * r1);
    *((*((0x20001e68 + r0) << 2)) + 44) = var6 + (r0 * r1);
    if (r5 == 2)
    {
      r0 = r0 << 1;
    }
    else
    {
      r1 = r0 & 1;
      r0 = r0 + (r0 << 1);
      var8 = (r0 & 1) + ((r0 + (r0 << 1)) >> 1);
    }

  }

  r1 = *((*((0x20001e68 + r0) << 2)) + 32);
  r0 = r0 + 4095;
  if ((*((*((0x20001e68 + r0) << 2)) + 32)) < (r0 + 4095))
  {
    sp = sp + 16;
    r0 = 13;
    return 13;
  }

  r0 = 4294967295;
  *((*((0x20001e68 + r0) << 2)) + 20) = 4294967295;
  *((*((0x20001e68 + r0) << 2)) + 16) = 4294967295;
  r0 = 128;
  *((*((0x20001e68 + r0) << 2)) + 4) = 128;
  cond0 = r5 == 3;
  r0 = (*((0x20001e68 + r0) << 2)) + 104;
  func_0x803cbd0();
  ;
  cond1 = ((*((0x20001e68 + r0) << 2)) + 104) == 1;
  r1 = r6 + 1;
  r0 = *((0x20001e68 + r0) << 2);
  func_0x803d14e();
  ;
  cond2 = (*((0x20001e68 + r0) << 2)) == 0;
  *((*((0x20001e68 + r0) << 2)) + 4) = 0;
  r0 = (*((0x20001e68 + r0) << 2)) + 566;
  func_0x803cbd0();
  ;
  var9 = ((*((0x20001e68 + r0) << 2)) + 566) - 43520;
  r1 = var9 - 85;
  cond3 = (var9 - 85) == 0;
  r0 = (*((0x20001e68 + r0) << 2)) + 56;
  func_0x803cbba();
  ;
  r1 = 0x41615252;
  cond4 = ((*((0x20001e68 + r0) << 2)) + 56) == 0x41615252;
  r0 = (*((0x20001e68 + r0) << 2)) + 540;
  func_0x803cbba();
  ;
  r1 = 0x61417272;
  cond5 = ((*((0x20001e68 + r0) << 2)) + 540) == 0x61417272;
  if (((((cond0 && cond1) && cond2) && cond3) && cond4) && cond5)
  {
    r0 = (*((0x20001e68 + r0) << 2)) + 544;
    func_0x803cbba();
    ;
    *((*((0x20001e68 + r0) << 2)) + 20) = (*((0x20001e68 + r0) << 2)) + 544;
    r0 = (*((0x20001e68 + r0) << 2)) + 548;
    func_0x803cbba();
    ;
    *((*((0x20001e68 + r0) << 2)) + 16) = (*((0x20001e68 + r0) << 2)) + 548;
  }

  *((*((0x20001e68 + r0) << 2)) + 0) = r5;
  r1 = 0x20001e64;
  r0 = *(0x20001e64 + 0);
  r0 = (*(0x20001e64 + 0)) + 1;
  *(0x20001e64 + 0) = (*(0x20001e64 + 0)) + 1;
  *((*((0x20001e68 + r0) << 2)) + 6) = (*(0x20001e64 + 0)) + 1;
  r0 = 0x20018b78;
  *((*((0x20001e68 + r0) << 2)) + 12) = 0x20018b78;
  *((*((0x20001e68 + r0) << 2)) + 24) = 0;
  sp = sp + 16;
  r0 = 0;
  return 0;
}

