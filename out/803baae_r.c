void func_0x803baae(int p1, int p2)
{
  r4 = p1;
  r5 = p2;
  r1 = sp;
  r0 = p1;
  func_0x803d6fc();
  ;
  r8 = p1;
  r0 = p1;
  if (p1 == 0)
  {
    r8 = *(p1 + 17);
  }

  if (r8 != 0)
  {
    r0 = r8;
    return;
  }

  r0 = *(p1 + 12);
  r1 = *(p1 + 16);
  if (((*(p1 + 12)) < p2) && (~((*(p1 + 16)) & 2)))
  {
    r5 = *(p1 + 12);
  }

  r0 = *(p1 + 20);
  r7 = 0;
  *(p1 + 20) = 0;
  r9 = 1;
  if (r5 != 0)
  {
    r1 = *(sp + 0);
    r1 = *((*(sp + 0)) + 10);
    r6 = (*((*(sp + 0)) + 10)) << 12;
    sl = 2;
    cond0 = (*(p1 + 20)) != 0;
    r1 = r5 - 1;
    r0 = (*(p1 + 20)) - 1;
    var0 = (r5 - 1) / ((*((*(sp + 0)) + 10)) << 12);
    var1 = ((*(p1 + 20)) - 1) / ((*((*(sp + 0)) + 10)) << 12);
    cond1 = var0 >= var1;
    if (cond0 && cond1)
    {
      var2 = ((*((*(sp + 0)) + 10)) << 12) - 1;
      var3 = ((*(p1 + 20)) - 1) & (~var2);
      *(p1 + 20) = var3;
      r5 = r5 - var3;
      r1 = *(p1 + 24);
    }
    else
    {
      r1 = *(p1 + 8);
      if ((*(p1 + 8)) == 0)
      {
        r1 = 0;
        r0 = p1;
        func_0x803b110();
        ;
        r1 = p1;
        if (p1 == 1)
        {
          *(p1 + 17) = 2;
          r0 = 2;
          return;
        }

        if (p1 == (-1))
        {
          *(p1 + 17) = r9;
          r0 = 1;
          return;
        }

        *(p1 + 8) = p1;
      }

      *(p1 + 24) = r1;
    }

    if (r1 != 0)
    {
      if (r5 > ((*((*(sp + 0)) + 10)) << 12))
      {
        while (1)
        {
          r5 = r5 - r6;
          r0 = *(r4 + 20);
          r0 = (*(r4 + 20)) + r6;
          *(r4 + 20) = (*(r4 + 20)) + r6;
          r0 = *(r4 + 16);
          if ((*(r4 + 16)) & 2)
          {
            r0 = r4;
            func_0x803b110();
            ;
            r1 = r4;
            if (r4 == 0)
            {
              r5 = 0;
              break;
            }

          }
          else
          {
            r0 = r4;
            func_0x803c790();
            ;
            r1 = r4;
          }

          if (r1 == (-1))
          {
            *(r4 + 17) = r9;
            r0 = 1;
            return;
          }

          cond0 = r1 <= 1;
          r0 = *(sp + 0);
          r0 = *((*(sp + 0)) + 28);
          cond1 = (*((*(sp + 0)) + 28)) <= r1;
          if (cond0 || cond1)
          {
            *(r4 + 17) = sl;
            r0 = 2;
            return;
          }

          *(r4 + 24) = r1;
          if (r5 <= r6)
          {
            break;
          }

        }

      }

      r0 = *(p1 + 20);
      r0 = (*(p1 + 20)) + r5;
      *(p1 + 20) = (*(p1 + 20)) + r5;
      r0 = r5 << 20;
      r0 = (r5 << 20) >> 20;
      if (((r5 << 20) >> 20) != 0)
      {
        r0 = *(sp + 0);
        func_0x803b054();
        ;
        if ((*(sp + 0)) == 0)
        {
          *(p1 + 17) = 2;
          r0 = 2;
          return;
        }

        r7 = r0 + (r5 >> 12);
      }

    }
    else
    {
    }

  }

  r1 = *(p1 + 12);
  r0 = *(p1 + 20);
  if ((*(p1 + 20)) > (*(p1 + 12)))
  {
    *(p1 + 12) = *(p1 + 20);
    r1 = *(p1 + 16);
    r1 = (*(p1 + 16)) | 64;
    *(p1 + 16) = (*(p1 + 16)) | 64;
  }

  r0 = (*(p1 + 20)) << 20;
  r0 = ((*(p1 + 20)) << 20) >> 20;
  if ((((*(p1 + 20)) << 20) >> 20) == 0)
  {
    r0 = r8;
    return;
  }

  r2 = *(p1 + 28);
  if ((*(p1 + 28)) == r7)
  {
    r0 = r8;
    return;
  }

  r0 = *(p1 + 16);
  if ((*(p1 + 16)) & 128)
  {
    r0 = *(sp + 0);
    r3 = 1;
    r1 = p1 + 40;
    r0 = *((*(sp + 0)) + 1);
    func_0x803ba7e();
    ;
    if ((*((*(sp + 0)) + 1)) != 0)
    {
      *(p1 + 17) = r9;
      r0 = 1;
      return;
    }

    r0 = *(p1 + 16);
    r0 = (*(p1 + 16)) & 127;
    *(p1 + 16) = (*(p1 + 16)) & 127;
  }

  r0 = *(sp + 0);
  r3 = 1;
  r2 = r7;
  r0 = *((*(sp + 0)) + 1);
  r1 = p1 + 40;
  func_0x803ba6a();
  ;
  if ((*((*(sp + 0)) + 1)) != 0)
  {
    *(p1 + 17) = r9;
    r0 = 1;
    return;
  }

  *(p1 + 28) = r7;
  r0 = r8;
  return;
}

